<!--#include file="header.html"-->

<div class="header-bg">
	<img src="images/top-bg-history.jpg" alt="alt">
</div>

<div class="page-titles">
	<h1 class="page-title">О компании</h1>
	<div class="page-after-title">Продукция, изготовленная в соответствии со всеми современными стандартами животноводства</div>
</div>

<main class="content" id="content">
	<nav class="category-nav">
		<ul>
			<li><a href="#">О предприятии</a></li>
			<li><a href="#">История предприятия</a></li>
			<li><a href="#">Наши достижения</a></li>
			<li><a href="#">Струкутра предприятия</a></li>
			<li><a href="#" class="active">Фирменная торговля</a></li>
			<li><a href="#">Работа и карьра</a></li>
		</ul>
	</nav>
	
	<div class="trade-list">

		<div class="trade-item collapsible-item">
			<div class="trade-head collapsible-head">
				Борисовский район
				<div class="plus"></div>
			</div>
			<div class="trade-body collapsible-body">
				<div class="flex-row pins-list">

					<div class="flx-4 flx-m-6 flx-x-12">
						<div class="pin-item" data-coords="54.209712, 28.523271">
							<div class="title">Магазин "Колосок"</div>
							<div class="contacts">
								<div class="item">
									<span class="type">Адрес:</span>
									<span class="pin-adres">г.Борисов, ул. Труда, 41</span>
									<div><a href="javascript:void(0)" class="bordered-link to-pin-link">Показать на карте</a></div>
								</div>
								<div class="item">
									<span class="type">Телефон:</span>
									8 (0177) 70-42-08
								</div>
							</div>
						</div>
					</div><!--.flx-4-->

					<div class="flx-4 flx-m-6 flx-x-12">
						<div class="pin-item" data-coords="54.237716, 28.471142">
							<div class="title">Магазин "Мельник"</div>
							<div class="contacts">
								<div class="item">
									<span class="type">Адрес:</span>
									<span class="pin-adres">г.Борисов, ул. Днепровская, 21б</span>
									<div><a href="javascript:void(0)" class="bordered-link to-pin-link">Показать на карте</a></div>
								</div>
								<div class="item">
									<span class="type">Телефон:</span>
									8 (0177) 70-42-08
								</div>
							</div>
						</div>
					</div><!--.flx-4-->

				</div><!--.pins-list-->
			</div>
		</div><!--trade-item-->

		
		<div class="trade-item collapsible-item">
			<div class="trade-head collapsible-head">
				Вилейский район
				<div class="plus"></div>
			</div>
			<div class="trade-body collapsible-body">
				<div class="flex-row pins-list">

					<div class="flx-4 flx-m-6 flx-x-12">
						<div class="pin-item" data-coords="54.495379, 26.908502">
							<div class="title">Фирменный магазин 1</div>
							<div class="contacts">
								<div class="item">
									<span class="type">Адрес:</span>
									<span class="pin-adres">г. Вилейка, Яблоневая улица, 3А</span>
									<div><a href="javascript:void(0)" class="bordered-link to-pin-link">Показать на карте</a></div>
								</div>
								<div class="item">
									<span class="type">Телефон:</span>
									8 (0177) 70-42-08
								</div>
							</div>
						</div>
					</div><!--.flx-4-->

					<div class="flx-4 flx-m-6 flx-x-12">
						<div class="pin-item" data-coords="54.487747, 26.908062">
							<div class="title">Фирменный магазин 2</div>
							<div class="contacts">
								<div class="item">
									<span class="type">Адрес:</span>
									<span class="pin-adres">г.Вилейка, ул. Водопьянова, 30</span>
									<div><a href="javascript:void(0)" class="bordered-link to-pin-link">Показать на карте</a></div>
								</div>
								<div class="item">
									<span class="type">Телефон:</span>
									8 (0177) 70-42-08
								</div>
							</div>
						</div>
					</div><!--.flx-4-->

				</div><!--.pins-list-->
			</div>
		</div><!--trade-item-->

		<div class="trade-item collapsible-item">
			<div class="trade-head collapsible-head">
				Несвижский район
				<div class="plus"></div>
			</div>
			<div class="trade-body collapsible-body">
				Перечень точек продаж района
			</div>
		</div><!--trade-item-->

		<div class="trade-item collapsible-item">
			<div class="trade-head collapsible-head">
				Крупский район
				<div class="plus"></div>
			</div>
			<div class="trade-body collapsible-body">
				Перечень точек продаж района
			</div>
		</div><!--trade-item-->

		<div class="trade-item collapsible-item">
			<div class="trade-head collapsible-head">
				Логойский район
				<div class="plus"></div>
			</div>
			<div class="trade-body collapsible-body">
				Перечень точек продаж района
			</div>
		</div><!--trade-item-->

		<div class="trade-item collapsible-item">
			<div class="trade-head collapsible-head">
				Столбцовский район
				<div class="plus"></div>
			</div>
			<div class="trade-body collapsible-body">
				Перечень точек продаж района
			</div>
		</div><!--trade-item-->

	</div><!--.trade-list-->
	
</main>

<script>
	window.onload = function(){
		$('.trade-map').insertAfter($('#middle'));
		var script = document.createElement('script');
		script.src = 'https://api-maps.yandex.ru/2.1/?lang=ru_RU';
		document.body.appendChild(script);

		script.onload = function(){
			ymaps.ready(function () {
				var myMap = new ymaps.Map("trade-map", {
	        center: [54.209734, 28.523261],
	        zoom: 11
				});

				pin = document.querySelectorAll('.pin-item');
				if(pin.length) {
        for(var i = 0; i < pin.length; i++) {
          var pinCoords = pin[i].getAttribute('data-coords'),
          		pinTitle = pin[i].querySelector('.pin-item .title').textContent,
              pinAdrs =  pin[i].querySelector('.pin-item .pin-adres').textContent;
          var pinX = pinCoords.split(',')[0],
              pinY = pinCoords.split(',')[1];
 
          var currentPin = 'pin'+i;
          
          currentPin = new ymaps.Placemark([pinX, pinY], {
              hintContent: pinTitle,
            	balloonContent: '<strong>'+pinTitle+'</strong><br/>'+ pinAdrs
          },{
              iconLayout: 'default#image',
              iconImageHref: 'images/icons/pin-map.png',
              iconImageSize: [22, 30],
              iconImageOffset: [-11, -30]
          });
          //добавляем все пины на карту
          myMap.geoObjects.add(currentPin);

        }//if end
        }

				//отрубаем скролл карты мышью
				myMap.behaviors.disable('scrollZoom');
				// myMap.behaviors.disable('drag');

				myMap.container.events.add('fullscreenenter', function(){
				  myMap.behaviors.enable(['scrollZoom']);
				});
				myMap.container.events.add('fullscreenexit', function(){
				  myMap.behaviors.disable(['scrollZoom']);
				});

				//центрируем карту, скролим к ней
				$(document).on('click', '.to-pin-link',function(e){
					e.preventDefault();
					//pin coords
					var $this = $(this),
					$coords = $this.closest('.pin-item').data('coords'),
					$coordX = parseFloat($coords.split(',')[0]),
					$coordY = parseFloat($coords.split(',')[1]);
					//map offset
					var mapOffset = $('.trade-map').offset().top;
			 		$('html,body').animate({
			 			scrollTop: mapOffset
			 		},300);
			 		setTimeout(function(){
			 			myMap.panTo(
              [$coordX,$coordY], {}
            );
			 		},300);
				});

			});
		}
	}
</script>

<div class="trade-map"><div id="trade-map"></div></div>

	

<!--#include file="footer.html"-->